<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Hollow Knight: Silksong Save File Viewer - Analyze your save game progress">
    <title>Silksong Webweaver - Save Viewer</title>
    <link rel="icon"
        href="https://raw.githubusercontent.com/alleriaJY/silksong-webweaver/main/.assets/img/silksong_logo.ico"
        type="image/x-icon">
    <link rel="stylesheet" href="src/styles.css">
</head>

<body>
    <div class="container">
        <header>
            <img src="https://raw.githubusercontent.com/alleriaJY/silksong-webweaver/main/.assets/img/silksong_logo.ico"
                alt="Silksong Logo" class="logo">
            <h1>Silksong: Webweaver</h1>
            <p class="subtitle">Re-weaving the timeline</p>
        </header>

        <main>
            <!-- Upload Section -->
            <section class="upload-section">
                <h2>Upload Save File</h2>
                <div class="upload-area" id="upload-area">
                    <input type="file" id="file-input" accept=".dat" hidden>
                    <label for="file-input" class="upload-label">
                        <div class="upload-icon">üìÅ</div>
                        <span class="upload-text">Drop your .dat file here or click to browse</span>
                        <span class="file-name" id="file-name"></span>
                    </label>
                </div>
                <p class="upload-hint">Your save file is processed entirely in your browser. Nothing is uploaded to any
                    server.</p>

                <!-- Analyze Button -->
                <button class="analyze-btn" id="analyze-btn" disabled>
                    <span class="btn-icon">üîç</span>
                    <span>Analyze Save File</span>
                </button>
            </section>

            <!-- Loading Indicator -->
            <div class="loading" id="loading" hidden>
                <div class="spinner"></div>
                <p>Decrypting and parsing save file...</p>
            </div>

            <!-- Error Display -->
            <div class="error-message" id="error-message" hidden>
                <span class="error-icon">‚ö†Ô∏è</span>
                <span id="error-text"></span>
            </div>

            <!-- Stats Section with Tabs -->
            <section class="stats-section" id="stats-section" hidden>
                <h2>üìä Save File Statistics</h2>

                <!-- Tab Navigation -->
                <nav class="tab-nav" id="tab-nav">
                    <button class="tab-btn active" data-tab="general">
                        <span class="tab-text">GENERAL</span>
                    </button>
                    <button class="tab-btn" data-tab="current">
                        <span class="tab-text">CURRENT STATS</span>
                    </button>
                    <button class="tab-btn" data-tab="misc">
                        <span class="tab-text">MISC</span>
                    </button>
                    <button class="tab-btn" data-tab="tools">
                        <span class="tab-text">TOOLS</span>
                    </button>
                    <button class="tab-btn" data-tab="bosses">
                        <span class="tab-text">BOSSES</span>
                    </button>
                    <button class="tab-btn" data-tab="fleas">
                        <span class="tab-text">FLEAS</span>
                    </button>
                    <button class="tab-btn" data-tab="collectables">
                        <span class="tab-text">COLLECTABLES</span>
                    </button>
                </nav>

                <!-- Tab Panels -->
                <div class="tab-panels">

                    <!-- 1. General Tab -->
                    <div class="tab-panel active" id="panel-general">
                        <div class="panel-header">
                            <h3>General Information</h3>
                            <p class="panel-description">Overview of your save file</p>
                        </div>
                        <div class="panel-content">
                            <!-- Game Info Card -->
                            <div class="stat-card">
                                <h4>üéÆ Game Info</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Game Version</span>
                                    <span class="stat-value" data-stat="version">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Game Mode</span>
                                    <span class="stat-value" data-stat="permadeath">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Completion</span>
                                    <span class="stat-value highlight" data-stat="completion">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Play Time</span>
                                    <span class="stat-value highlight" data-stat="playTime">-</span>
                                </div>
                            </div>

                            <!-- Max Unlocked Card -->
                            <div class="stat-card">
                                <h4>‚¨ÜÔ∏è Stats</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Max Health</span>
                                    <span class="stat-value" data-stat="maxHealth">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Max Silk</span>
                                    <span class="stat-value" data-stat="maxSilk">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Max Silk Hearts</span>
                                    <span class="stat-value" data-stat="silkHearts">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 2. Current Stats Tab -->
                    <div class="tab-panel" id="panel-current">
                        <div class="panel-header">
                            <h3>Current Stats</h3>
                            <p class="panel-description">Your current in-game status</p>
                        </div>
                        <div class="panel-content">
                            <!-- Health & Silk Card -->
                            <div class="stat-card">
                                <h4>‚ù§Ô∏è Health & Silk</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Current Health</span>
                                    <span class="stat-value" data-stat="healthDisplay">-</span>
                                </div>
                                <div class="health-bar" id="health-bar">
                                    <div class="health-fill" id="health-fill"></div>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Current Silk</span>
                                    <span class="stat-value" data-stat="silkDisplay">-</span>
                                </div>
                            </div>

                            <!-- Currency Card -->
                            <div class="stat-card">
                                <h4>üí∞ Currency</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Rosaries</span>
                                    <span class="stat-value highlight" data-stat="geo">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Shell Shards</span>
                                    <span class="stat-value" data-stat="shellShards">-</span>
                                </div>
                            </div>

                            <!-- Equipment Card -->
                            <div class="stat-card">
                                <h4>‚öîÔ∏è Equipment</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Equipped Crest</span>
                                    <span class="stat-value" data-stat="crest">-</span>
                                </div>
                            </div>

                            <!-- Current Position Card -->
                            <div class="stat-card">
                                <h4>üìç Current Position</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Current Area</span>
                                    <span class="stat-value highlight" data-stat="currentArea">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Map Zone</span>
                                    <span class="stat-value" data-stat="mapZone">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">At Bench</span>
                                    <span class="stat-value" data-stat="atBench">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 3. Misc Tab -->
                    <div class="tab-panel" id="panel-misc">
                        <div class="panel-header">
                            <h3>Miscellaneous</h3>
                            <p class="panel-description">Additional save file details</p>
                        </div>
                        <div class="panel-content">
                            <!-- Respawn Info Card -->
                            <div class="stat-card">
                                <h4>üîÑ Respawn Info</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Respawn Area</span>
                                    <span class="stat-value" data-stat="respawnScene">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Respawn Marker</span>
                                    <span class="stat-value" data-stat="respawnMarker">-</span>
                                </div>
                            </div>

                            <!-- Save Info Card -->
                            <div class="stat-card">
                                <h4>üìù Save Info</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Respawn Type</span>
                                    <span class="stat-value" data-stat="respawnType">-</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 4. Tools Tab -->
                    <div class="tab-panel" id="panel-tools">
                        <div class="panel-header">
                            <h3>Tools</h3>
                            <p class="panel-description">Your collected tools and abilities</p>
                        </div>
                        <div class="panel-content">
                            <div class="stat-card">
                                <h4>üîß Tool Statistics</h4>
                                <div class="stat-row">
                                    <span class="stat-label">Total Tools</span>
                                    <span class="stat-value" data-stat="toolsTotal">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Unlocked</span>
                                    <span class="stat-value highlight" data-stat="toolsUnlocked">-</span>
                                </div>
                                <div class="stat-row">
                                    <span class="stat-label">Seen</span>
                                    <span class="stat-value" data-stat="toolsSeen">-</span>
                                </div>
                            </div>
                            <div class="tools-grid" id="tools-grid">
                                <!-- Future: Add individual tool icons -->
                            </div>
                        </div>
                    </div>

                    <!-- 5. Bosses Tab (Placeholder) -->
                    <div class="tab-panel" id="panel-bosses">
                        <div class="panel-header">
                            <h3>Bosses</h3>
                            <p class="panel-description">Boss encounters and defeats</p>
                        </div>
                        <div class="panel-content">
                            <div class="placeholder-card">
                                <p>Boss tracking coming soon!</p>
                            </div>
                        </div>
                    </div>

                    <!-- 6. Fleas Tab (Placeholder) -->
                    <div class="tab-panel" id="panel-fleas">
                        <div class="panel-header">
                            <h3>Fleas</h3>
                            <p class="panel-description">Flea encounters</p>
                        </div>
                        <div class="panel-content">
                            <div class="placeholder-card">
                                <p>Flea tracking coming soon!</p>
                            </div>
                        </div>
                    </div>

                    <!-- 7. Collectables Tab (Placeholder) -->
                    <div class="tab-panel" id="panel-collectables">
                        <div class="panel-header">
                            <h3>Collectables</h3>
                            <p class="panel-description">Items and collectables found</p>
                        </div>
                        <div class="panel-content">
                            <div class="placeholder-card">
                                <p>Collectable tracking coming soon!</p>
                            </div>
                        </div>
                    </div>

                </div>
            </section>
        </main>

        <footer>
            <p>Silksong Webweaver &copy; <span id="current-year"></span> |
                <a href="https://github.com/alleriaJY/silksong-webweaver" target="_blank">GitHub</a>
            </p>
            <p class="footer-note">Powered by Rust + WebAssembly</p>
        </footer>
    </div>

    <script type="module" src="src/main.js"></script>
</body>

</html>